# 压测待办事项

## 当前状态：未完成

根据C++代码规范，压测必须在所有单元测试通过后进行，且压测数据必须是真实运行的结果，不能预估。

## 待完成的压测任务

### 1. B1-Stdio性能测试 [false]

**前置条件**：
- ✅ B1-StdioPerformance.cc 已创建
- ❌ Stdio管道通信测试需要修复
- ❌ 需要确保T1-StdioClient和T2-StdioServer测试通过

**测试内容**：
- Ping性能测试（1000次迭代）
- 工具调用性能测试
- 资源读取性能测试
- 列表操作性能测试

**需要记录的指标**：
- 总请求数
- 平均延迟、中位数延迟
- 最小/最大延迟
- P95/P99延迟
- 标准差
- 吞吐量（QPS）

**机器配置**：
- CPU型号和核心数
- 内存大小
- 操作系统版本
- 编译器版本

### 2. B2-HTTP性能测试 [false]

**前置条件**：
- ✅ B2-HttpPerformance.cc 已创建
- ❌ HTTP客户端连接问题需要修复
- ❌ 需要确保T3-HttpClient和T4-HttpServer测试通过

**测试内容**：
- Ping性能测试（1000次迭代）
- 工具调用性能测试
- 资源读取性能测试
- 列表操作性能测试

**需要记录的指标**：
- 同B1，另外需要对比Stdio和HTTP的性能差异

### 3. B3-并发请求压测 [false]

**前置条件**：
- ✅ B3-ConcurrentRequests.cc 已创建
- ❌ HTTP服务器需要稳定运行
- ❌ 需要B2测试通过

**测试内容**：
- 1, 2, 4, 8, 10, 16, 32线程并发测试
- 每线程100个请求
- 可扩展性测试

**需要记录的指标**：
- 每个并发级别的QPS
- 延迟变化曲线
- 成功率
- 扩展性分析

## 执行计划

### 阶段1：修复基础测试 [进行中]

1. **修复Stdio管道通信问题**
   - 问题：管道通信时客户端读取失败
   - 需要：调试stdin/stdout通信逻辑

2. **修复HTTP连接问题**
   - 问题：客户端连接服务器失败
   - 需要：检查URL解析和连接逻辑

### 阶段2：运行单元测试 [待开始]

1. 确保T1-StdioClient测试通过
2. 确保T2-StdioServer测试通过
3. 确保T3-HttpClient测试通过
4. 确保T4-HttpServer测试通过

### 阶段3：运行压测 [待开始]

1. 运行B1-StdioPerformance，记录真实数据
2. 运行B2-HttpPerformance，记录真实数据
3. 运行B3-ConcurrentRequests，记录真实数据

### 阶段4：生成文档 [待开始]

1. 创建 `docs/B1-Stdio性能测试.md`（包含真实数据）
2. 创建 `docs/B2-HTTP性能测试.md`（包含真实数据）
3. 创建 `docs/B3-并发请求压测.md`（包含真实数据）

### 阶段5：更新待办列表 [待开始]

将所有压测任务标记为 `[true]`

## 注意事项

1. **绝对不能预估数据**：所有性能数据必须是真实运行的结果
2. **必须记录机器配置**：CPU、内存、操作系统等信息
3. **必须包含详细指标**：QPS、延迟、P95/P99等
4. **必须先通过单元测试**：压测只在单元测试全部通过后进行

## 当前阻塞问题

1. Stdio管道通信在测试时失败
2. HTTP客户端无法连接到服务器
3. 需要先解决这些问题才能进行压测

## 下一步行动

1. 调试并修复Stdio和HTTP的基础功能
2. 确保所有单元测试通过
3. 然后再运行真实的压测
4. 用真实数据生成压测文档
